---
title: Documentation/Guide des Composants
---

<div className="sb-container">
  <div className="sb-section-title">
    # Guide des Composants

    Ce guide pr√©sente tous les composants de l'application, leurs usages et leurs bonnes pratiques d'utilisation.
  </div>

  ## Architecture des composants

  Les composants sont organis√©s en trois cat√©gories principales :

  ### üì¶ Common - Composants r√©utilisables
  Composants g√©n√©riques utilisables dans tout le projet

  ### üìù Forms - Composants de formulaire
  Composants li√©s √† la saisie et la soumission de donn√©es

  ### üìä Display - Composants d'affichage
  Composants pour afficher les r√©sultats et les donn√©es d'audit

  ---

  ## Common

  ### LoadingSpinner

  **Fichier** : `src/components/common/LoadingSpinner.tsx`

  Indicateur de chargement anim√© avec message personnalisable.

  **Props** :
  - `message?: string` - Message principal (d√©faut: "Analyse en cours...")
  - `subtext?: string` - Texte secondaire (d√©faut: "Cela peut prendre quelques instants.")

  **Utilisation** :
  ```jsx
  <LoadingSpinner
    message="Chargement des donn√©es..."
    subtext="Merci de patienter."
  />
  ```

  **Quand l'utiliser** :
  - Pendant les appels API
  - Lors du traitement de donn√©es
  - Pendant les op√©rations asynchrones

  **Stories disponibles** :
  - Default - Configuration par d√©faut
  - CustomMessage - Avec messages personnalis√©s
  - ShortMessage - Message court
  - LongMessage - Message long et d√©taill√©

  ---

  ### ErrorDisplay

  **Fichier** : `src/components/common/ErrorDisplay.tsx`

  Affichage d'erreur avec suggestions de r√©solution.

  **Props** :
  - `message: string` - Message d'erreur √† afficher

  **Utilisation** :
  ```jsx
  <ErrorDisplay message="Erreur lors de la r√©cup√©ration des donn√©es Figma" />
  ```

  **Quand l'utiliser** :
  - Erreurs API
  - Erreurs de validation
  - Erreurs de r√©seau

  **Stories disponibles** :
  - Default - Erreur standard
  - NetworkError - Erreur r√©seau
  - AuthError - Erreur d'authentification
  - LongError - Message d'erreur long

  ---

  ## Forms

  ### InputForm

  **Fichier** : `src/components/forms/InputForm.tsx`

  Formulaire principal pour soumettre une URL Figma et une cl√© API.

  **Contexte requis** : `AuditContext`

  **Props** : Aucune (utilise le contexte)

  **Utilisation** :
  ```jsx
  <AuditProvider>
    <InputForm />
  </AuditProvider>
  ```

  **Fonctionnalit√©s** :
  - Validation d'URL Figma
  - Gestion de la cl√© API (optionnelle pour les fichiers publics)
  - √âtats de chargement
  - Gestion des erreurs

  **Stories disponibles** :
  - Default - Formulaire vide
  - WithMockData - Formulaire pr√©-rempli

  ---

  ### PrimaryButton

  **Fichier** : `src/components/forms/PrimaryButton.tsx`

  Bouton principal avec √©tats de chargement et d√©sactivation.

  **Props** :
  - `onClick?: () => void` - Handler de clic
  - `text?: string` - Texte du bouton (d√©faut: "Analyser la maquette")
  - `loadingText?: string` - Texte pendant le chargement (d√©faut: "Analyse en cours...")
  - `isLoading?: boolean` - √âtat de chargement
  - `canSubmit?: boolean` - Bouton activ√©/d√©sactiv√© (d√©faut: true)
  - `type?: 'submit' | 'button'` - Type HTML du bouton (d√©faut: 'submit')

  **Utilisation** :
  ```jsx
  <PrimaryButton
    onClick={handleSubmit}
    isLoading={loading}
    canSubmit={isValid}
    text="Analyser"
  />
  ```

  **States** :
  - **Default** - Bouton normal, cliquable
  - **Loading** - Spinner anim√©, non cliquable
  - **Disabled** - Bouton gris√©, non cliquable

  **Stories disponibles** :
  - Default - √âtat normal
  - Disabled - Bouton d√©sactiv√©
  - Loading - En cours de chargement
  - CustomText - Texte personnalis√©
  - CustomLoadingText - Texte de chargement personnalis√©
  - ButtonType - Type "button" au lieu de "submit"
  - LongText - Texte long
  - LongLoadingText - Texte de chargement long

  ---

  ## Display

  ### StatsCards

  **Fichier** : `src/components/display/StatsCards.tsx`

  Cartes statistiques affichant le r√©sum√© de l'audit.

  **Contexte requis** : `AuditContext`

  **Props** : Aucune (utilise le contexte)

  **Utilisation** :
  ```jsx
  <AuditProvider initialState={{ auditResult: data }}>
    <StatsCards />
  </AuditProvider>
  ```

  **Affiche** :
  - Nombre total de probl√®mes d√©tect√©s
  - Nombre de r√®gles d√©clench√©es
  - Graphique de r√©partition (si disponible)

  **Stories disponibles** :
  - WithIssues - Avec plusieurs probl√®mes
  - AllCompliant - Aucun probl√®me (design parfait)
  - SingleRuleWithIssues - Une seule r√®gle d√©clench√©e
  - ManyRules - Beaucoup de r√®gles (stress test)

  ---

  ### RuleBadge

  **Fichier** : `src/components/RuleBadge.tsx`

  Badge repr√©sentant une r√®gle d'audit avec compteur de d√©tections.

  **Contexte requis** : `AuditContext`

  **Props** :
  - `ruleId: number` - ID de la r√®gle
  - `onClick?: () => void` - Handler de clic
  - `isActive?: boolean` - √âtat actif/s√©lectionn√©

  **Utilisation** :
  ```jsx
  <AuditProvider initialState={{ auditResult: data }}>
    <RuleBadge
      ruleId={1}
      onClick={() => console.log('Clicked')}
      isActive={selectedRule === 1}
    />
  </AuditProvider>
  ```

  **Apparence** :
  - Ic√¥ne de la r√®gle
  - Nom de la r√®gle
  - Nombre de d√©tections
  - Couleur selon la cat√©gorie

  **Stories disponibles** :
  - DefaultNaming - Badge de r√®gle "Naming"
  - ActiveNaming - Badge "Naming" actif
  - AutoLayout - Badge "Auto Layout"
  - ActiveAutoLayout - Badge "Auto Layout" actif
  - DetachedStyles - Badge "Styles d√©tach√©s"
  - ActiveDetachedStyles - Badge "Styles d√©tach√©s" actif
  - AllBadges - Vue d'ensemble de tous les badges

  ---

  ### RuleDetails

  **Fichier** : `src/components/RuleDetails.tsx`

  D√©tails d'une r√®gle avec description, s√©v√©rit√© et suggestions.

  **Contexte requis** : `AuditContext`

  **Props** :
  - `ruleId: number` - ID de la r√®gle
  - `isOpen?: boolean` - Accord√©on ouvert/ferm√©
  - `moreInfos?: any` - Informations suppl√©mentaires

  **Utilisation** :
  ```jsx
  <AuditProvider initialState={{ auditResult: data }}>
    <RuleDetails
      ruleId={1}
      isOpen={true}
      moreInfos={additionalData}
    />
  </AuditProvider>
  ```

  **Affiche** :
  - Description d√©taill√©e de la r√®gle
  - Badge de s√©v√©rit√© (info, warning, error)
  - Suggestions de correction
  - Informations contextuelles

  **Stories disponibles** :
  - DefaultNaming - D√©tails de la r√®gle "Naming"
  - AutoLayout - D√©tails "Auto Layout"
  - DetachedStyles - D√©tails "Styles d√©tach√©s"
  - Closed - Accord√©on ferm√©
  - WithExtraInfo - Avec informations suppl√©mentaires

  ---

  ### FigmaDescription

  **Fichier** : `src/components/display/FigmaDescription.tsx`

  Affiche les informations de la maquette Figma analys√©e.

  **Contexte requis** : `AuditContext`

  **Props** : Aucune (utilise le contexte)

  **Utilisation** :
  ```jsx
  <AuditProvider initialState={{ figmaUrl: url }}>
    <FigmaDescription />
  </AuditProvider>
  ```

  **Affiche** :
  - Nom du fichier Figma
  - Lien vers la maquette
  - Date d'analyse
  - M√©tadonn√©es

  **Stories disponibles** :
  - Default - Description standard
  - LongTitle - Titre long
  - NoLink - Sans lien Figma

  ---

  ### TotalDetectedRules

  **Fichier** : `src/components/display/TotalDetectedRules.tsx`

  Affiche le nombre total de r√®gles d√©clench√©es.

  **Contexte requis** : `AuditContext`

  **Props** : Aucune (utilise le contexte)

  **Utilisation** :
  ```jsx
  <AuditProvider initialState={{ auditResult: data }}>
    <TotalDetectedRules />
  </AuditProvider>
  ```

  **Affiche** :
  - Nombre de r√®gles d√©clench√©es
  - Animation de compteur
  - Badge color√© selon le nombre

  **Stories disponibles** :
  - NoRules - Aucune r√®gle
  - FewRules - Quelques r√®gles
  - ManyRules - Beaucoup de r√®gles
  - WithAnimation - Avec animation

  ---

  ## Composants sans stories (√† documenter)

  ### ComponentSuggestionsCards

  **Fichier** : `src/components/display/ComponentSuggestionsCards.tsx`

  Affiche les suggestions de composants d√©tect√©es par IA.

  **Props** :
  - `componentSuggestions?: ComponentSuggestion[]` - Liste des suggestions
  - `baseFigmaUrl?: string` - URL de base Figma

  **Fonctionnalit√©s** :
  - Accord√©ons pour chaque suggestion
  - Liste des instances d√©tect√©es
  - Structure du composant
  - Liens vers Figma

  **TODO** : Cr√©er des stories pour ce composant

  ---

  ### DesignSystemViewer

  **Fichier** : `src/components/display/DesignSystemViewer.tsx`

  Visualisation interactive du design system extrait.

  **Contexte requis** : `AuditContext`

  **Affiche** :
  - Styles de texte avec preview
  - Palette de couleurs (Design System + Locales)
  - Contours/Strokes
  - S√©lecteurs interactifs

  **TODO** : Cr√©er des stories pour ce composant

  ---

  ### DetailedTables

  **Fichier** : `src/components/display/DetailedTables.tsx`

  Tableau d√©taill√© avec tous les n≈ìuds et r√®gles.

  **Contexte requis** : `AuditContext`

  **Affiche** :
  - Liste des n≈ìuds avec probl√®mes
  - Badges de r√®gles cliquables
  - Liens vers Figma
  - Accord√©ons de d√©tails

  **TODO** : Cr√©er des stories pour ce composant

  ---

  ## Bonnes pratiques

  ### Gestion du contexte

  **Toujours wrapper les composants utilisant AuditContext** :
  ```jsx
  // ‚úÖ Correct
  <AuditProvider initialState={mockData}>
    <MyComponent />
  </AuditProvider>

  // ‚ùå Erreur - composant sans contexte
  <MyComponent />
  ```

  ### Props vs Context

  **Privil√©gier les props pour les composants r√©utilisables** :
  ```jsx
  // ‚úÖ R√©utilisable
  <LoadingSpinner message="Custom message" />

  // ‚ùå D√©pendant du contexte
  const { message } = useContext(MessageContext);
  <LoadingSpinner />
  ```

  ### Composition

  **Composer les composants au lieu de les dupliquer** :
  ```jsx
  // ‚úÖ Composition
  <Card>
    <CardHeader title="Audit" />
    <CardBody>
      <StatsCards />
    </CardBody>
  </Card>

  // ‚ùå Duplication
  <StatsCardWithHeader />
  ```

  ### Performance

  **Utiliser React.memo pour les composants co√ªteux** :
  ```jsx
  export default React.memo(ExpensiveComponent);
  ```

  **Utiliser useMemo pour les calculs lourds** :
  ```jsx
  const filteredData = useMemo(
    () => data.filter(item => item.active),
    [data]
  );
  ```

  ---

  ## Tests

  Chaque composant dispose de tests unitaires avec Testing Library :

  ```bash
  pnpm test                  # Lancer tous les tests
  pnpm test:ui              # Interface de tests
  pnpm test:coverage        # Rapport de couverture
  ```

  **Structure des tests** :
  ```
  ComponentName.tsx
  ComponentName.stories.tsx
  ComponentName.test.tsx
  ```

  **Exemple de test** :
  ```jsx
  import { render, screen } from '@testing-library/react';
  import LoadingSpinner from './LoadingSpinner';

  test('renders with custom message', () => {
    render(<LoadingSpinner message="Loading..." />);
    expect(screen.getByText('Loading...')).toBeInTheDocument();
  });
  ```

  ---

  **Documentation maintenue pour faciliter le d√©veloppement et la collaboration**
</div>

<style>
  {`
  .sb-container {
    margin-bottom: 48px;
  }

  .sb-section-title {
    margin-bottom: 32px;
  }

  .sb-section-title h1 {
    font-size: 2.5rem;
    font-weight: bold;
    margin-bottom: 1rem;
  }

  h2 {
    font-size: 1.875rem;
    font-weight: 600;
    margin-top: 3rem;
    margin-bottom: 1.5rem;
    padding-bottom: 0.5rem;
    border-bottom: 2px solid #e5e7eb;
  }

  h3 {
    font-size: 1.5rem;
    font-weight: 600;
    margin-top: 2rem;
    margin-bottom: 1rem;
    color: #1f2937;
  }

  h4 {
    font-size: 1.125rem;
    font-weight: 600;
    margin-top: 1rem;
    margin-bottom: 0.5rem;
    color: #374151;
  }

  code {
    background-color: #f3f4f6;
    padding: 0.125rem 0.375rem;
    border-radius: 0.25rem;
    font-family: 'Monaco', 'Courier New', monospace;
    font-size: 0.875rem;
    color: #be185d;
  }

  pre {
    background-color: #1f2937;
    padding: 1rem;
    border-radius: 0.5rem;
    overflow-x: auto;
    margin: 1rem 0;
  }

  pre code {
    background-color: transparent;
    color: #f9fafb;
    padding: 0;
  }

  p {
    line-height: 1.75;
    margin-bottom: 1rem;
    color: #4b5563;
  }

  strong {
    font-weight: 600;
    color: #1f2937;
  }

  ul, ol {
    margin-left: 1.5rem;
    margin-top: 0.5rem;
    margin-bottom: 1rem;
    line-height: 1.75;
  }

  li {
    margin-bottom: 0.5rem;
  }

  hr {
    margin: 2.5rem 0;
    border: none;
    border-top: 1px solid #e5e7eb;
  }

  a {
    color: #667eea;
    text-decoration: none;
    font-weight: 500;
  }

  a:hover {
    text-decoration: underline;
  }

  blockquote {
    border-left: 4px solid #667eea;
    padding-left: 1rem;
    margin: 1rem 0;
    color: #6b7280;
    font-style: italic;
  }
  `}
</style>
